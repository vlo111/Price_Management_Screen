<!-- MAIN CONTENT -->
<div id="content">

    <div class="row">
        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
            <h1 class="page-title txt-color-blueDark">
                <i class="fa-fw fa fa-truck"></i>
                Orders
                <span>
                    >
                    Subtitle
                </span>
            </h1>
        </div>
    </div>
    <section id="widget-grid" class="">
        <div class="row">

            <article class="col-sm-9">
                <!-- Order Info Section -->
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <div class="jarviswidget  jarviswidget-color-darken" id="wid-id-2" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false"
                         data-widget-deletebutton="false"
                         data-widget-fullscreenbutton="false"
                         data-widget-custombutton="false"
                         data-widget-collapsed="false"
                         data-widget-sortable="false" role="widget">

                        <!-- widget div-->
                        <header role="heading">
                            <h2 class="font-md"><strong>Order Info</strong></h2>
                            <span class="jarviswidget-loader"><i class="fa fa-refresh fa-spin"></i></span>
                        </header>
                        <div role="content">
                            <div class="row">
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="control-label col-sm-3">Work Order No.</label>
                                        <div class="col-sm-4">
                                            <input type="text" class="form-control" name="workOrderno" data-bv-field="workOrderno"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-sm-3">Invoice No.</label>
                                        <div class="col-sm-4">
                                            <input type="text" class="form-control" name="invoiceNo" data-bv-field="invoiceNo"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end widget div -->
                    </div>
                </div>
                <!-- Filter Section End -->
            </article>

        </div>
    </section>
    <section id="widget-grid" class="">

        <!-- START ROW -->
        <div class="row">
            <article class="col-sm-12 col-md-9 col-lg-9">
                <!-- NEW COL START -->
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <!-- Customer Div-->
                    <div class="jarviswidget  jarviswidget-color-darken" id="wid-id-2" data-widget-colorbutton="false"
                         data-widget-editbutton="false"
                         data-widget-togglebutton="false"
                         data-widget-deletebutton="false"
                         data-widget-fullscreenbutton="false"
                         data-widget-custombutton="false"
                         data-widget-collapsed="false"
                         data-widget-sortable="false" role="widget">

                        
                        <!-- widget div-->
                        <header role="heading">
                            <h2 class="font-md"><strong>Order</strong> <i>Details</i></h2>
                            <span class="jarviswidget-loader"><i class="fa fa-refresh fa-spin"></i></span>
                        </header>
                        <div role="content">
                            <div class="orderDetailPanel">
                                <!-- Customer Div-->
                                <div class="col-sm-12 col-md-6 col-lg-4 panel panel-default">

                                    <!-- widget content -->
                                    <div class="widget-body">
                                        <div id="checkout-form" class="form-horizontal bv-form" novalidate="novalidate">
                                            <fieldset>
                                                <legend>
                                                    Customer
                                                </legend>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <label class="col-md-5">Name</label>
                                                    <div class="col-md-7">
                                                        <select class="input-sm form-control" id="approvers">
                                                            <option value="0">Employees</option>
                                                            <option value="1">Alexandra</option>
                                                            <option value="2">Alice</option>
                                                            <option value="3">Anastasia</option>
                                                            <option value="4">Avelina</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <label class="col-md-5">Company</label>
                                                    <div class="col-md-7">
                                                        <label class="control-label">
                                                            Century Aliuminum
                                                        </label>
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <label class="col-md-5">Phone No.</label>
                                                    <div class="col-md-7">
                                                        <input type="text" class="form-control" id="phone_number" name="phone_number" data-bv-field="phone_number"><i class="form-control-feedback" data-bv-icon-for="email" style="display: none;"></i>
                                                    </div>
                                                </div>
                                            </fieldset>



                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <label class="col-md-5">Cell No.</label>
                                                    <div class="col-md-7">
                                                        <input type="text" class="form-control" id="cell_number">
                                                    </div>
                                                </div>
                                            </fieldset>


                                        </div>
                                    </div>
                                    <!-- end widget content -->
                                </div>
                                <!-- Action Div-->
                                <div class="col-sm-12 col-md-6 col-lg-4 panel panel-default">
                                    <!-- widget content -->
                                    <div class="widget-body">
                                        <div class="form-horizontal bv-form" novalidate="novalidate">
                                            <fieldset>
                                                <legend>
                                                    Action - Approve
                                                </legend>

                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <label class="col-md-5" for="Charge">Approver</label>
                                                    <div class="col-md-7">
                                                        <select class="input-sm form-control" id="approvers">
                                                            <option value="0">Employees</option>
                                                            <option value="1">Alexandra</option>
                                                            <option value="2">Alice</option>
                                                            <option value="3">Anastasia</option>
                                                            <option value="4">Avelina</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <label class="col-md-5" for="Carrier">PO Number</label>
                                                    <div class="col-md-7">
                                                        <input type="text" class="form-control pull-right" id="po_number" />
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <div class="col-md-7"></div>
                                                    <div class="col-md-5">
                                                        <button class="btn btn-primary form-control pull-right">Approve</button>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>
                                    </div>
                                </div>
                                <!-- Shipping Div-->
                                <div class="col-sm-12 col-md-6 col-lg-4 panel panel-default">
                                    <!-- widget content -->
                                    <div class="widget-body">
                                        <div class="form-horizontal" novalidate="novalidate">
                                            <fieldset>
                                                <legend>
                                                    Shipping
                                                </legend>

                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <span class="col-sm-6 no-padding">Shipping for Tag</span>
                                                    <div class="col-sm-6 no-padding">
                                                        <select class="input-sm currencyDropDown form-control" id="shipping_for">
                                                            <option value="0">Select</option>
                                                            <option value="1">Alexandra</option>
                                                            <option value="2">Alice</option>
                                                            <option value="3">Anastasia</option>
                                                            <option value="4">Avelina</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <span class="col-sm-6 no-padding">Proposed Ship Date</span>
                                                    <div class="col-sm-6 no-padding">

                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <span class="col-sm-6 no-padding">Carrier</span>
                                                    <div class="col-sm-6 no-padding">
                                                        <input type="text" class="form-control pull-right" id="kitFeeValue" />
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <span class="col-sm-6 no-padding">Charges</span>
                                                    <div class="col-sm-6 no-padding">
                                                        <input type="text" class="form-control pull-right" id="kitFeeValue" />
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <span class="col-sm-6 no-padding">Sales Person</span>
                                                    <div class="col-sm-6 no-padding">
                                                        <input type="text" class="form-control pull-right" id="kitFeeValue" />
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <fieldset>
                                                <div class="form-group has-feedback">
                                                    <span class="col-sm-6 no-padding">Payment Condition</span>
                                                    <div class="col-sm-6 no-padding">
                                                        <select class="input-xs form-control" id="paymentCondition">
                                                            <option value="0">Select</option>
                                                            <option value="1">Alexandra</option>
                                                            <option value="2">Alice</option>
                                                            <option value="3">Anastasia</option>
                                                            <option value="4">Avelina</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>
                                    </div>
                                    <!-- end widget content -->
                                </div>
                                <!-- Tags Div-->

                            </div>
                        </div>
                        <!-- end widget div -->
                    </div>

                </div>
                <!-- END COL -->
                <!-- NEW COL START -->
                <article class="col-sm-12 col-md-12 col-lg-12">
                    <div class="jarviswidget" id="PartsGrid" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false" role="widget">
                        <header role="heading">
                            @*<span class="jarviswidget-loader"><i class="fa fa-refresh fa-spin"></i></span>*@
                        </header>

                        <!-- widget div-->
                        <div class="well">
                            <div class="widget-body no-padding">
                                <!-- widget body text-->
                                <div class="tab-content padding-10">
                                    <div class="tab-pane fade active in" id="AllParts">
                                        <div class="padding-10">
                                            <div class="row">
                                                <table id="PartsList" class="table table-striped table-bordered table-hover"></table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->
                    </div>
                </article>
                <!-- END COL -->
            </article>
            <article class="col-sm-12 col-md-3 col-lg-3" id="PricingSection">
                <div class="jarviswidget jarviswidget-color-darken " id="wid-id-2" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" role="widget" style="">

                    <header role="heading">
                        <h2 class="font-md"><i>Pricing - CAD</i></h2>
                        <span class="jarviswidget-loader"><i class="fa fa-refresh fa-spin"></i></span>
                    </header>

                    <!-- widget div-->
                    <div role="content">
                        <div class="widget-body">
                            <div class="form-horizontal pricing-form" novalidate="novalidate">
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-5">Currency</label>
                                        <div class="col-sm-7">
                                            <select class="input-sm currencyDropDown form-control" id="currency_dropdown">
                                                <option value="0">Select</option>
                                                <option value="1">Alexandra</option>
                                                <option value="2">Alice</option>
                                                <option value="3">Anastasia</option>
                                                <option value="4">Avelina</option>
                                            </select>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Price Order Date</label>
                                        <div class="col-sm-6">
                                            <input class="form-control datepicker" />
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Total</label>
                                        <div class="col-sm-6">
                                            <label class="pull-right" id="totalValue">$90</label>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Packaging</label>
                                        <div class="col-sm-6">
                                            <label class="pull-right" id="totalValue">$90</label>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Discount</label>
                                        <div class="col-sm-6">
                                            <label class="pull-right" id="totalValue">$90</label>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Sub Total</label>
                                        <div class="col-sm-6">
                                            <label class="pull-right" id="totalValue">$90</label>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">PST</label>
                                        <div class="col-sm-6">
                                            <label class="pull-right" id="pstValue">0 %</label>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">GST</label>
                                        <div class="col-sm-6">
                                            <label class="pull-right" id="gstValue">$ 4.69</label>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">HST</label>
                                        <div class="col-sm-6">
                                            <label class="pull-right" id="hstValue">0 %</label>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Kit Processng Fee</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control pull-right" id="kitFeeValue" />
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Crate Fee</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control pull-right" id="crateFeeValue" />
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Packaging Fee</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control pull-right" id="packFeeValue" />
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Color Fee</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control pull-right" id="colorFeeValue" />
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Freight</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control pull-right" id="freightValue" />
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <div class="form-group has-feedback">
                                        <label class="col-md-6">Balance Due</label>
                                        <div class="col-sm-6">
                                            <label class="pull-right" id="balanceDueValue">$ 90</label>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
        </div>
        <!-- END ROW -->
    </section>

</div>
<!-- END MAIN CONTENT -->

<style>
    .orderDetailPanel {
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
    }

        .orderDetailPanel > div {
            margin: 0px 5px 15px 0px;
        }

        .orderDetailPanel .dropFile {
            overflow-y: scroll;
            max-height: 200px;
        }

    .tagDropDown {
        max-width: inherit;
        padding: 2px;
        color: #000;
    }

    .tagPanel {
        padding: 5px;
        border-radius: 5px;
    }

    #tagSection .active table thead {
        color: #000;
    }

    #tagSection .active {
        border-radius: 5px;
        border-color: #3276b1;
        color: #fff;
        background-color: #337ab7;
    }
    /* #tagSection .active label{
       color: #fff;
    }
        #tagSection .active table tbody {

            background-color: #fff;
        }*/
    .tagLabel {
        padding: 0px 10px;
    }
</style>

@section pagespecific {

    <script>
        function removePartFrmTag(cntrl) {
            alert(this)
            $(cntrl).closest('tr').remove();
        }
    </script>

    <script>
        var responsiveHelper_datatable_tabletools = undefined;
        var responsiveHelper = undefined;

        var breakpointDefinition = {
            tablet: 1024,
            phone: 480
        };

        var clientTable = $('#PartsList').DataTable({
            serverSide: true,
            "bFilter": false,
            "bLengthChange": false,
            "ajax": {
                "url": appRoot + "order/GetOrders",
                "type": 'GET',
                "data": function (d) {
                    d.PartsIds = $('#partsSelected').val();

                }
            },
            "bInfo": false, //Dont display info e.g. "Showing 1 to 4 of 4 entries"
            "searching": false, //Disable searching abilities in DataTables:
            "bPaginate": false,//Dont want paging
            "columnDefs": [{
                "searchable": false,
                "orderable": false,
                "targets": 0
            }],
            "order": [[1, 'asc']],
            columns: [
                {
                    name: 'tag',
                    data: "tag",
                    title: "Tag",
                    sortable: false,
                    searchable: false
                },
                {
                    name: 'profle',
                    data: "profile",
                    title: "Profile",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'color',
                    data: "color",
                    title: "Colour",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'group',
                    data: "group",
                    title: "Group",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'productID',
                    data: "productID",
                    title: "Prod ID",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'description',
                    data: "description",
                    title: "Description",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'custom',
                    data: "custom",
                    title: "Custom",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'comments',
                    data: "comments",
                    title: "Comment",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'weightMeasurement',
                    data: "weightMeasurement",
                    title: "Qty",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'weightMeasurement',
                    data: "weightMeasurement",
                    title: "Mea Unit",
                    width: "60px",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'weight',
                    data: "weight",
                    title: "Weight",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'file',
                    data: "file",
                    title: "File",
                    sortable: false,
                    searchable: false,
                },
                {
                    name: 'unitsell',
                    data: "unitsell",
                    title: "Unit Sell",
                    sortable: true,
                    searchable: true
                },
                {
                    name: 'total',
                    data: "total",
                    title: "Total",
                    sortable: true,
                    searchable: true
                }
            ],
            "scrollX": true,
            "oLanguage": {
                "sSearch": ""
            },
            initComplete: function () {

            },
            "autoWidth": true,
            "preDrawCallback": function () {
                // Initialize the responsive datatables helper once.
                if (!responsiveHelper) {
                    responsiveHelper = new ResponsiveDatatablesHelper($('#PartsList'), breakpointDefinition);
                }
            },
            "rowCallback": function (nRow) {
                responsiveHelper.createExpandIcon(nRow);
            },
            "drawCallback": function (oSettings) {
                responsiveHelper.respond();
            }
        });
        clientTable.on('order.dt search.dt', function () {
            clientTable.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                cell.innerHTML = i + 1;
            });
        }).draw();

        var attendeeUrl = '@Url.Action("GetItems", "Order")';
        var pageSize = 20;

        var select2Instance = $("#txt_productSearch").select2({
            ajax: {
                url: attendeeUrl,
                dataType: 'json',
                delay: 250,
                data: function (term, page) {
                    page = page > 1 ? page : 0;
                    var cat = $('#Categoryddl').val();
                    var subCategory = cat ? cat : 0;
                    var Category = $('[name=CategoryType] li.active').attr('name');
                    return {
                        pageSize: pageSize,
                        pageNum: page,
                        searchTerm: term,
                        Category: Category,
                        subCategory: subCategory
                    };
                },

                results: function (data, page) {
                    //Used to determine whether or not there are more results available,
                    //and if requests for more data should be sent in the infinite scrolling
                    var more = (page * pageSize) < data.Total;
                    return { results: data.Results, more: more };
                },
                cache: true
            },
            dropdownParent: jQuery('div#txt_productSearch'),
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 1,
            allowClear: true

            ////  templateResult: formatRepo, // omitted for brevity, see the source of this page
            //templateSelection: formatRepoSelection // omitted for brevity, see the source of this page
        });

        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });

        $("#txt_productSearch").on("change", function (event) {

            // getting selected value
            var last = $("#txt_productSearch").select2('data');
            // adding the data in the grid
            addPartItem(last.id);

            $("#txt_productSearch").select2("val", "");
        });

        function addPartItem(itemId) {
            var attendeeUrl = '@Url.Action("GetPartAgainstId", "Order")';
            var counter = 0;
            var partsId = $('#partsSelected').val();
            if (partsId) {
                if (partsId.indexOf(itemId) == -1) {
                    partsId += "," + itemId;
                }
            } else {
                partsId = itemId;
            }
            $('#partsSelected').val(partsId);
            clientTable.ajax.reload();

        }

        $(".datepicker").datepicker();

    </script>
    <script type="text/javascript">
           // PAGE RELATED SCRIPTS

          // pagefunction

          var pagefunction = function () {

              Dropzone.autoDiscover = false;
              $("#mydropzone").dropzone({
                  //url: "/file/post",
                  addRemoveLinks: true,
                  maxFilesize: 0.5,
                  dictDefaultMessage: '<span class="text-center"><span class="font-lg visible-xs-block visible-sm-block visible-lg-block"><span class="font-lg"><i class="fa fa-caret-right text-danger"></i> Drop files <span class="font-xs">to upload</span></span><span>&nbsp&nbsp<h4 class="display-inline"> (Or Click)</h4></span>',
                  dictResponseError: 'Error uploading file!'
              });

              //File Upload response from the server
              Dropzone.options.dropzoneForm = {
                  init: function () {
                      this.on("complete", function (data) {
                          //var res = eval('(' + data.xhr.responseText + ')');
                          var res = JSON.parse(data.xhr.responseText);
                      });
                  }
              };

          };

        // end pagefunction
    </script>

}